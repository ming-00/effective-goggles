/*!
 * Cuberto JellyScroll
 * https://cuberto.com/
 *
 * @version 1.0.1
 * @author Artem Dordzhiev (Draft) | Cuberto, info@cuberto.com
 * @license Copyright 2020, Cuberto. All rights reserved.
 */
window.JellyEffect=function(){function t(t){this.jellys=[],this.els=document.querySelectorAll("[data-cuberto-jelly]");for(var s=0;s<this.els.length;s++){var e=this.els[s],o=Object.assign({},t,e.dataset.cubertoJelly?JSON.parse(e.dataset.cubertoJelly):{}),i=new window.Jelly(e,o);this.jellys.push(i)}}return t.prototype.pause=function(t){for(var s=0;s<this.jellys.length;s++)this.jellys[s].pause(t)},t.prototype.destroy=function(){for(var t=0;t<this.jellys.length;t++)this.jellys[t].destroy()},t}(),window.Jelly=function(){function t(t,s){this.el=t,this.paused=!1,this.options=Object.assign({},{intensity:.15,speed:.6,min:-5,max:5,scrollPos:function(){return window.pageYOffset}},s),this.init()}return t.prototype.getScrollPos=function(){return this.options.scrollPos()},t.prototype.pause=function(t){void 0===t&&(t=!0),this.paused=t},t.prototype.init=function(){var t=this;this.observer=new IntersectionObserver(function(s){s[0].isIntersecting?t.startLoop():t.stopLoop()}),this.observer.observe(this.el)},t.prototype.startLoop=function(){this.y=this.getScrollPos(),this.loop()},t.prototype.stopLoop=function(){cancelAnimationFrame(this.frame),this.paused||gsap.set(this.el,{skewY:0})},t.prototype.loop=function(){var t=this.getScrollPos(),s=t-this.y,e=Math.min(Math.max(this.options.min,s*this.options.intensity),this.options.max);this.paused?this.animationPaused||(gsap.to(this.el,{skewY:0,force3D:!0,duration:this.options.speed}),this.animationPaused=!0):(gsap.set(this.el,{skewY:e,force3D:!0}),this.animationPaused=!1),this.y=t,this.frame=requestAnimationFrame(this.loop.bind(this))},t.prototype.destroy=function(){this.observer.disconnect(),this.pause(!1),this.stopLoop()},t}();